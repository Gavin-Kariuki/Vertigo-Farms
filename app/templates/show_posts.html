{% extends 'base.html' %}

{% block styles %}
    {{ super() }}
    <link rel="stylesheet" href="{{url_for('static',filename='css/styles.css')}}">
{% endblock %}

{% block content %}
   <div class="container">
        <div class="col-md-8 mx-auto justify-content-center">
           <h2>All posts...</h2>
            {% for post in posts %}
            <hr>
              <div class="item">
                <h4 class='title'>{{ post.title }}</h4>
                <p> {{ post.post_content | truncate(300)}}</p>   
                <p>{{ post.author }}</p>  
                <p> created: {{ post.posted.strftime('%Y-%m-%d') }}</p>  
                <p>{{post.item_price}}</p>             

                {% if current_user.id == post.author.id %}
                    <a href="{{url_for('main.delete_post',title = post.title)}}" class="btn btn-danger">Delete Post</a> 
                {% endif %}

                {% if current_user.id == post.author.id %}
                    <a href="{{url_for('main.add_to_cart',id = post.id)}}" class="btn btn-danger">ADD TO CART</a> 
                {% endif %}
              </div>
            <hr>            
            {% endfor %}
        </div>
        <div class="col-md-4">   
             {% if cart_items %}
             <h3>Your Cart</h3>
              {% for item in cart_items %}
                <h4>{{item.title}}-{{item.item_price}}</h4>
              {% endfor %}
              <h5>TOTAL: </h5>
             {% endif %}
        </div>
   </div>
{% endblock %}